      - name: Deploy manifests (clean)
        run: |
          set -euo pipefail
          kubectl get ns demo >/dev/null 2>&1 || kubectl create ns demo
          kubectl -n demo delete -f k8s/manifests/ --ignore-not-found
          kubectl apply -f k8s/manifests/
          kubectl -n demo rollout status deploy/web --timeout=180s
          kubectl -n demo get pods -o wide
          kubectl -n demo get svc -o wide
